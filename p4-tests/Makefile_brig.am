# Tests

-include tofinotests.mk
#-include p4-16-tofinotests.mk
-include tofino-p14_to_16_tests.mk
-include tofino-p4tests.mk
-include tofino-bmv2tests.mk
-include ortools-tofinotests.mk

tofinotests.mk: $(GENTESTS) $(srcdir)/%reldir%/Makefile.am $(wildcard \
   $(srcdir)/testdata/p4_14_samples/\*.p4 \ 
   $(srcdir)/testdata/p4_14_samples/switch_\*/switch.p4 \
   $(srcdir)/%reldir%/p4_16/\*.p4 \
   $(srcdir)/%reldir%/p4_14/01-FlexCounter.p4 \
   $(srcdir)/%reldir%/p4_14/01-OneAction.p4 \
   $(srcdir)/%reldir%/p4_14/02-ActionDep1.p4 \
   $(srcdir)/%reldir%/p4_14/02-FlexCounterActionProfile.p4 \
   $(srcdir)/%reldir%/p4_14/02-OneTableManyActions.p4 \
   $(srcdir)/%reldir%/p4_14/03-ActionDep2.p4 \
   $(srcdir)/%reldir%/p4_14/03-ActionSharing.p4 \
   $(srcdir)/%reldir%/p4_14/03-VlanProfile.p4 \
   $(srcdir)/%reldir%/p4_14/04-FullPHV3.p4 \
   $(srcdir)/%reldir%/p4_14/04-MatchDep.p4 \
   $(srcdir)/%reldir%/p4_14/04-WideAction.p4 \
   $(srcdir)/%reldir%/p4_14/05-NoCommonCode.p4 \
   $(srcdir)/%reldir%/p4_14/05-SuccessorDep.p4 \
   $(srcdir)/%reldir%/p4_14/06-MultiFieldAdd.p4 \
   $(srcdir)/%reldir%/p4_14/06-Phase0.p4 \
   $(srcdir)/%reldir%/p4_14/06-ReverseReadDep.p4 \
   $(srcdir)/%reldir%/p4_14/07-ComplexAction.p4 \
   $(srcdir)/%reldir%/p4_14/07-MacAddrCheck.p4 \
   $(srcdir)/%reldir%/p4_14/08-MacAddrCheck1.p4 \
   $(srcdir)/%reldir%/p4_14/08-OneTableManyActionsNoColors.p4 \
   $(srcdir)/%reldir%/p4_14/09-MacAddrCheck2.p4 \
   $(srcdir)/%reldir%/p4_14/09-MatchNoDep.p4 \
   $(srcdir)/%reldir%/p4_14/09-OneTableManyActionsWithColors.p4 \
   $(srcdir)/%reldir%/p4_14/10-AssignChooseSource.p4 \
   $(srcdir)/%reldir%/p4_14/10-MatchNoDep1.p4 \
   $(srcdir)/%reldir%/p4_14/10-TcamPragma.p4 \
   $(srcdir)/%reldir%/p4_14/11-AssignChooseDest.p4 \
   $(srcdir)/%reldir%/p4_14/11-FourTables.p4 \
   $(srcdir)/%reldir%/p4_14/11-MinimalL2.p4 \
   $(srcdir)/%reldir%/p4_14/12-MaxEnriesSRAM.p4 \
   $(srcdir)/%reldir%/p4_14/12-MaxEnriesTCAM.p4 \
   $(srcdir)/%reldir%/p4_14/12-SmallToBigFieldWithMask8.p4 \
   $(srcdir)/%reldir%/p4_14/13-IngressEgressConflict.p4 \
   $(srcdir)/%reldir%/p4_14/13-ResubmitMetadataSize.p4 \
   $(srcdir)/%reldir%/p4_14/14-MultipleActionsInAContainer.p4 \
   $(srcdir)/%reldir%/p4_14/15-SetMetadata.p4 \
   $(srcdir)/%reldir%/p4_14/15-WrongSize.p4 \
   $(srcdir)/%reldir%/p4_14/16-WrongSizeInfiniteLoop.p4 \
   $(srcdir)/%reldir%/p4_14/17-Vlantransform.p4 \
   $(srcdir)/%reldir%/p4_14/18-SimpleVlanTransform.p4 \
   $(srcdir)/%reldir%/p4_14/19-SimpleTrill.p4 \
   $(srcdir)/%reldir%/p4_14/20-SimpleTrillTwoStep.p4 \
   $(srcdir)/%reldir%/p4_14/21-SimpleTrillThreeStep.p4 \
   $(srcdir)/%reldir%/p4_14/22-BigToSmallFieldWithMask8.p4 \
   $(srcdir)/%reldir%/p4_14/23-SimpleMPLS.p4 \
   $(srcdir)/%reldir%/p4_14/24-SimpleTrillThreeStep2.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_multiple.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_next_stage.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_not_shared.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_separate_stages.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_shared.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_too_large.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_shared_four.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_shared.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_two_selectors.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_wide1.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_wide2.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_with_counter.p4 \
   $(srcdir)/%reldir%/p4_14/basic_ipv4_selection.p4 \
   $(srcdir)/%reldir%/p4_14/counter_test1.p4 \
   $(srcdir)/%reldir%/p4_14/counter_test2.p4 \
   $(srcdir)/%reldir%/p4_14/debug_issue_1_invalid_action_pack_format.p4 \
   $(srcdir)/%reldir%/p4_14/debug_issue_3_7_way_table.p4 \
   $(srcdir)/%reldir%/p4_14/debug_issue_4_small_exact_match_key.p4 \
   $(srcdir)/%reldir%/p4_14/dileep10.p4 \
   $(srcdir)/%reldir%/p4_14/dileep11.p4 \
   $(srcdir)/%reldir%/p4_14/dileep12.p4 \
   $(srcdir)/%reldir%/p4_14/dileep2.p4 \
   $(srcdir)/%reldir%/p4_14/dileep3.p4 \
   $(srcdir)/%reldir%/p4_14/dileep4.p4 \
   $(srcdir)/%reldir%/p4_14/dileep7-b.p4 \
   $(srcdir)/%reldir%/p4_14/dileep8.p4 \
   $(srcdir)/%reldir%/p4_14/dileep.p4 \
   $(srcdir)/%reldir%/p4_14/exact_match0.p4 \
   $(srcdir)/%reldir%/p4_14/exact_match_shared0.p4 \
   $(srcdir)/%reldir%/p4_14/exact_match_shared1.p4 \
   $(srcdir)/%reldir%/p4_14/exact_match_shared2.p4 \
   $(srcdir)/%reldir%/p4_14/exact_match_shared3.p4 \
   $(srcdir)/%reldir%/p4_14/gateway_and_big_table.p4 \
   $(srcdir)/%reldir%/p4_14/gateway_bus1.p4 \
   $(srcdir)/%reldir%/p4_14/gateway_bus2.p4 \
   $(srcdir)/%reldir%/p4_14/hash_index0.p4 \
   $(srcdir)/%reldir%/p4_14/hash_index1.p4 \
   $(srcdir)/%reldir%/p4_14/hash_index2.p4 \
   $(srcdir)/%reldir%/p4_14/hash_index3.p4 \
   $(srcdir)/%reldir%/p4_14/hash_index5.p4 \
   $(srcdir)/%reldir%/p4_14/max_counters.p4 \
   $(srcdir)/%reldir%/p4_14/meter_and_counter2.p4 \
   $(srcdir)/%reldir%/p4_14/meter_and_counter.p4 \
   $(srcdir)/%reldir%/p4_14/meter_test1.p4 \
   $(srcdir)/%reldir%/p4_14/meter_test2.p4 \
   $(srcdir)/%reldir%/p4_14/meter_test3.p4 \
   $(srcdir)/%reldir%/p4_14/meter_test4.p4 \
   $(srcdir)/%reldir%/p4_14/simple_counter.p4 \
   $(srcdir)/%reldir%/p4_14/switch_l2_profile.p4 \
   $(srcdir)/%reldir%/p4_14/switch_l2_profile_tofino.p4 \
   $(srcdir)/%reldir%/p4_14/ternary_match_shared0.p4 \
   $(srcdir)/%reldir%/p4_14/ternary_match_shared1.p4 \
   $(srcdir)/%reldir%/p4_14/ternary_match_shared2.p4 \
   $(srcdir)/%reldir%/p4_14/ternary_match_shared3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_100_hash_action.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_101_switch_msdc.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_102_clone.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_103_first_phase_0.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_10_new_crossbar_allocation.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_114_simple_drop.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_115_hash_parity_groups.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_116_predication_with_condition.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_117_first_tcam_range.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_118_tcam_range_2.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_119_tcam_range_3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_11_simple_gateway_table.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_120_tcam_range_4.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_121_tcam_range_5.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_122_tcam_range_6.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_123_meter_2.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_124_meter_3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_125_meter_pre_color.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_126_meter_pre_color_2.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_127_meter_pre_color_3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_128_table_placement_bug.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_12_no_overhead.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_132_meter_pre_color_4.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_134_stage_deps.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_135_tcam_range_7.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_136_tcam_error_detection.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_137_tcam_error_detection_2.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_138_tcam_error_detection_3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_139_tcam_error_detection_4.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_13_first_selection.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_140_table_counter.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_142_stateful_bfd.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_143_packing_constants.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_144_recirculate.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_145_shift_primitives.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_146_two_drops.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_147_subtract_primitive.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_148_action_profile.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_149_signed_and_saturating_add_sub.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_14_auto_immediate_action_data.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_150_action_bus_allocation.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_151_action_bus_allocation_2.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_152_stateful_simple_cntr.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_153_stateful_simple_cntr_with_output.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_154_stateful_sampling.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_155_stateful_3_alus.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_156_indirect_stateful_cntr.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_157_random_number_generator.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_158_share_vliw.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_159_stateful_using_phv_field.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_15_wide_key.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_160_stateful_single_bit_mode.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_161_new_primitives.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_162_add_header_init.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_163_stateful_table_math_unit.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_164_stateful_deterministic_sampling.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_165_stateful_bfd_failure_detection.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_166_stateful_generic_counter.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_167_stateful_flowlet_switching.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_168_meter_bug.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_169_stateful_sflow_sequence.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_16_action_packing_multi_entry_with_pad.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_170_stateful_selection_table_update.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_171_stateful_conga.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_172_stateful_heavy_hitter.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_173_stateful_bloom_filter.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_17_action_packing_wide_with_pad.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_18_first_bit_xor.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_19_immediate_but_no_action_data_table.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_1_ternary_match_crossbar.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_20_table_dependencies.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_21_tcam_vpns.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_22_direct_mapped_exact.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_24_action_entries_pragma.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_25_no_reads_for_table.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_26_direct_add_primitive.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_2_action_data_table_sizing.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_30_action_data_imm_param.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_31_action_data_imm_imm.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_32_action_data_imm_param_imm.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_33_action_data_paramx3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_34_action_data_1_bit_params.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_35_action_data_1_bit_params_and_imms.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_36_action_data_field_param.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_37_action_data_field_field.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_38_action_data_field_same_container.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_39_action_data_add_to_field.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_40_action_data_bit_xor.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_41_action_data_remove_header.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_42_action_data_add_header.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_44_action_data_immediate.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_45_action_data_immediate_param_and_constant.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_46_action_data_big_constant.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_47_action_data_big_constant_immediate.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_48_action_data_bit_masked_set.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_49_action_data_bit_masked_set_immediate.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_4_modify_field.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_50_action_data_different_size_fields.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_51_action_data_same_parameter_used_multiple.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_52_copy_header.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_53_ternary_swizzle.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_55_generate_digest.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_56_iterate_through_packing.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_57_tcam_with_44_bits_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_58_tcam_with_40_bits.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_59_tcam_with_44_bits_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_5_sram_allocation.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_70_tcam_with_128_bits_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_71_tcam_with_128_bits_and_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_72_tcam_with_172_bits_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_72_tcam_with_172_bits_high_nibble_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_73_tcam_with_172_bits_low_nibble_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_74_tcam_with_172_bits_low_nibble_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_75_tcam_with_176_bits_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_76_tcam_with_176_bits_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_77_tcam_with_216_bits_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_78_tcam_with_220_bits_high_nibble_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_79_tcam_with_220_bits_high_nibble_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_80_tcam_with_220_bits_low_nibble_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_81_indirect_action_data_default.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_82_param_sharing.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_83_no_immediate_when_indirect_action_table.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_84_simple_wide_exact_match.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_85_table_ordering.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_86_multiple_action_widths_for_indirect_action.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_87_share_parameter_for_different_containers.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_88_testing_action_data_allocation_3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_89_testing_action_data_allocation_3_with_partial_ram.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_90_testing_action_data_allocation_3_with_fields_in_overhead.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_91_gateway_with_split_table.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_92_bit_xor_10_bits.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_93_push_and_pop.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_94_action_constant_alignment.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_96_hash_data.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_97_unrelated_tables.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_98_multiple_control_flow.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_99_share_exact_match_key.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_9_no_ternary_indirection.p4 \
   $(srcdir)/%reldir%/p4_14/test_tp_1_one_table_spill.p4 \
   $(srcdir)/%reldir%/p4_14/vk_basic_ipv4_20150706.p4 \
   $(srcdir)/%reldir%/p4_14/vk_basic_ipv4_subset.p4 \
   $(srcdir)/%reldir%/p4_14/switch.p4 ) \
   $(srcdir)/testdata/p4_14_samples \
   $(srcdir)/%reldir%/p4_16 \
   $(srcdir)/%reldir%/p4_14
	@$(GENTESTS) $(srcdir) tofino $(srcdir)/%reldir%/runtest $^ >$@ || ( rm $@ && false )

ortools-tofinotests.mk: $(GENTESTS) $(srcdir)/%reldir%/Makefile.am $(wildcard \
   $(srcdir)/testdata/p4_14_samples/\*.stf \
   $(srcdir)/%reldir%/p4_16/\*.stf \
   $(srcdir)/%reldir%/p4_16/counter_test1.stf \
   $(srcdir)/%reldir%/p4_16/v1_samples/counter_test2.stf \
   $(srcdir)/%reldir%/p4_16/v1_samples/gateway_bus1.stf \
   $(srcdir)/%reldir%/p4_16/v1_samples/gateway_bus2.stf \
   $(srcdir)/%reldir%/p4_16/v1_samples/max_counters.stf \
   $(srcdir)/%reldir%/p4_16/v1_samples/meter_test1.stf \
   $(srcdir)/%reldir%/p4_16/v1_samples/simple_counter.stf ) \
	@$(GENTESTS) $(srcdir) tofino-ortools $(srcdir)/%reldir%/runtest --ortools $(^:%.stf=%.p4) >$@ || ( rm $@ && false )

# We have additional test inputs that are used to test the other (standard) back-ends
# These test input programs depend on Tofino in some way.

# Exercise v12test back-end on Tofino-specific programs
tofino-p14_to_16_tests.mk: $(GENTESTS) $(srcdir)/%reldir%/Makefile.am $(wildcard \
   $(srcdir)/%reldir%/p4_14/01-FlexCounter.p4 \
   $(srcdir)/%reldir%/p4_14/01-OneAction.p4 \
   $(srcdir)/%reldir%/p4_14/02-ActionDep1.p4 \
   $(srcdir)/%reldir%/p4_14/02-FlexCounterActionProfile.p4 \
   $(srcdir)/%reldir%/p4_14/02-OneTableManyActions.p4 \
   $(srcdir)/%reldir%/p4_14/03-ActionDep2.p4 \
   $(srcdir)/%reldir%/p4_14/03-ActionSharing.p4 \
   $(srcdir)/%reldir%/p4_14/03-VlanProfile.p4 \
   $(srcdir)/%reldir%/p4_14/04-FullPHV3.p4 \
   $(srcdir)/%reldir%/p4_14/04-MatchDep.p4 \
   $(srcdir)/%reldir%/p4_14/04-WideAction.p4 \
   $(srcdir)/%reldir%/p4_14/05-NoCommonCode.p4 \
   $(srcdir)/%reldir%/p4_14/05-SuccessorDep.p4 \
   $(srcdir)/%reldir%/p4_14/06-MultiFieldAdd.p4 \
   $(srcdir)/%reldir%/p4_14/06-Phase0.p4 \
   $(srcdir)/%reldir%/p4_14/06-ReverseReadDep.p4 \
   $(srcdir)/%reldir%/p4_14/07-ComplexAction.p4 \
   $(srcdir)/%reldir%/p4_14/07-MacAddrCheck.p4 \
   $(srcdir)/%reldir%/p4_14/08-MacAddrCheck1.p4 \
   $(srcdir)/%reldir%/p4_14/08-OneTableManyActionsNoColors.p4 \
   $(srcdir)/%reldir%/p4_14/09-MacAddrCheck2.p4 \
   $(srcdir)/%reldir%/p4_14/09-MatchNoDep.p4 \
   $(srcdir)/%reldir%/p4_14/09-OneTableManyActionsWithColors.p4 \
   $(srcdir)/%reldir%/p4_14/10-AssignChooseSource.p4 \
   $(srcdir)/%reldir%/p4_14/10-MatchNoDep1.p4 \
   $(srcdir)/%reldir%/p4_14/10-TcamPragma.p4 \
   $(srcdir)/%reldir%/p4_14/11-AssignChooseDest.p4 \
   $(srcdir)/%reldir%/p4_14/11-FourTables.p4 \
   $(srcdir)/%reldir%/p4_14/11-MinimalL2.p4 \
   $(srcdir)/%reldir%/p4_14/12-MaxEnriesSRAM.p4 \
   $(srcdir)/%reldir%/p4_14/12-MaxEnriesTCAM.p4 \
   $(srcdir)/%reldir%/p4_14/12-SmallToBigFieldWithMask8.p4 \
   $(srcdir)/%reldir%/p4_14/13-IngressEgressConflict.p4 \
   $(srcdir)/%reldir%/p4_14/13-ResubmitMetadataSize.p4 \
   $(srcdir)/%reldir%/p4_14/14-MultipleActionsInAContainer.p4 \
   $(srcdir)/%reldir%/p4_14/15-SetMetadata.p4 \
   $(srcdir)/%reldir%/p4_14/15-WrongSize.p4 \
   $(srcdir)/%reldir%/p4_14/16-WrongSizeInfiniteLoop.p4 \
   $(srcdir)/%reldir%/p4_14/17-Vlantransform.p4 \
   $(srcdir)/%reldir%/p4_14/18-SimpleVlanTransform.p4 \
   $(srcdir)/%reldir%/p4_14/19-SimpleTrill.p4 \
   $(srcdir)/%reldir%/p4_14/20-SimpleTrillTwoStep.p4 \
   $(srcdir)/%reldir%/p4_14/21-SimpleTrillThreeStep.p4 \
   $(srcdir)/%reldir%/p4_14/22-BigToSmallFieldWithMask8.p4 \
   $(srcdir)/%reldir%/p4_14/23-SimpleMPLS.p4 \
   $(srcdir)/%reldir%/p4_14/24-SimpleTrillThreeStep2.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_multiple.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_next_stage.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_not_shared.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_separate_stages.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_shared.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_too_large.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_shared_four.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_shared.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_two_selectors.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_wide1.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_wide2.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_with_counter.p4 \
   $(srcdir)/%reldir%/p4_14/basic_ipv4_selection.p4 \
   $(srcdir)/%reldir%/p4_14/counter_test1.p4 \
   $(srcdir)/%reldir%/p4_14/counter_test2.p4 \
   $(srcdir)/%reldir%/p4_14/debug_issue_1_invalid_action_pack_format.p4 \
   $(srcdir)/%reldir%/p4_14/debug_issue_3_7_way_table.p4 \
   $(srcdir)/%reldir%/p4_14/debug_issue_4_small_exact_match_key.p4 \
   $(srcdir)/%reldir%/p4_14/dileep10.p4 \
   $(srcdir)/%reldir%/p4_14/dileep11.p4 \
   $(srcdir)/%reldir%/p4_14/dileep12.p4 \
   $(srcdir)/%reldir%/p4_14/dileep2.p4 \
   $(srcdir)/%reldir%/p4_14/dileep3.p4 \
   $(srcdir)/%reldir%/p4_14/dileep4.p4 \
   $(srcdir)/%reldir%/p4_14/dileep7-b.p4 \
   $(srcdir)/%reldir%/p4_14/dileep8.p4 \
   $(srcdir)/%reldir%/p4_14/dileep.p4 \
   $(srcdir)/%reldir%/p4_14/exact_match0.p4 \
   $(srcdir)/%reldir%/p4_14/exact_match_shared0.p4 \
   $(srcdir)/%reldir%/p4_14/exact_match_shared1.p4 \
   $(srcdir)/%reldir%/p4_14/exact_match_shared2.p4 \
   $(srcdir)/%reldir%/p4_14/exact_match_shared3.p4 \
   $(srcdir)/%reldir%/p4_14/gateway_and_big_table.p4 \
   $(srcdir)/%reldir%/p4_14/gateway_bus1.p4 \
   $(srcdir)/%reldir%/p4_14/gateway_bus2.p4 \
   $(srcdir)/%reldir%/p4_14/hash_index0.p4 \
   $(srcdir)/%reldir%/p4_14/hash_index1.p4 \
   $(srcdir)/%reldir%/p4_14/hash_index2.p4 \
   $(srcdir)/%reldir%/p4_14/hash_index3.p4 \
   $(srcdir)/%reldir%/p4_14/hash_index5.p4 \
   $(srcdir)/%reldir%/p4_14/max_counters.p4 \
   $(srcdir)/%reldir%/p4_14/meter_and_counter2.p4 \
   $(srcdir)/%reldir%/p4_14/meter_and_counter.p4 \
   $(srcdir)/%reldir%/p4_14/meter_test1.p4 \
   $(srcdir)/%reldir%/p4_14/meter_test2.p4 \
   $(srcdir)/%reldir%/p4_14/meter_test3.p4 \
   $(srcdir)/%reldir%/p4_14/meter_test4.p4 \
   $(srcdir)/%reldir%/p4_14/simple_counter.p4 \
   $(srcdir)/%reldir%/p4_14/switch_l2_profile.p4 \
   $(srcdir)/%reldir%/p4_14/switch_l2_profile_tofino.p4 \
   $(srcdir)/%reldir%/p4_14/ternary_match_shared0.p4 \
   $(srcdir)/%reldir%/p4_14/ternary_match_shared1.p4 \
   $(srcdir)/%reldir%/p4_14/ternary_match_shared2.p4 \
   $(srcdir)/%reldir%/p4_14/ternary_match_shared3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_100_hash_action.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_101_switch_msdc.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_102_clone.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_103_first_phase_0.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_10_new_crossbar_allocation.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_114_simple_drop.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_115_hash_parity_groups.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_116_predication_with_condition.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_117_first_tcam_range.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_118_tcam_range_2.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_119_tcam_range_3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_11_simple_gateway_table.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_120_tcam_range_4.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_121_tcam_range_5.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_122_tcam_range_6.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_123_meter_2.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_124_meter_3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_125_meter_pre_color.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_126_meter_pre_color_2.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_127_meter_pre_color_3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_128_table_placement_bug.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_12_no_overhead.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_132_meter_pre_color_4.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_134_stage_deps.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_135_tcam_range_7.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_136_tcam_error_detection.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_137_tcam_error_detection_2.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_138_tcam_error_detection_3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_139_tcam_error_detection_4.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_13_first_selection.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_140_table_counter.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_142_stateful_bfd.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_143_packing_constants.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_144_recirculate.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_145_shift_primitives.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_146_two_drops.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_147_subtract_primitive.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_148_action_profile.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_149_signed_and_saturating_add_sub.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_14_auto_immediate_action_data.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_150_action_bus_allocation.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_151_action_bus_allocation_2.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_152_stateful_simple_cntr.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_153_stateful_simple_cntr_with_output.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_154_stateful_sampling.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_155_stateful_3_alus.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_156_indirect_stateful_cntr.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_157_random_number_generator.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_158_share_vliw.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_159_stateful_using_phv_field.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_15_wide_key.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_160_stateful_single_bit_mode.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_161_new_primitives.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_162_add_header_init.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_163_stateful_table_math_unit.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_164_stateful_deterministic_sampling.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_165_stateful_bfd_failure_detection.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_166_stateful_generic_counter.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_167_stateful_flowlet_switching.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_168_meter_bug.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_169_stateful_sflow_sequence.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_16_action_packing_multi_entry_with_pad.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_170_stateful_selection_table_update.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_171_stateful_conga.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_172_stateful_heavy_hitter.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_173_stateful_bloom_filter.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_17_action_packing_wide_with_pad.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_18_first_bit_xor.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_19_immediate_but_no_action_data_table.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_1_ternary_match_crossbar.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_20_table_dependencies.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_21_tcam_vpns.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_22_direct_mapped_exact.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_24_action_entries_pragma.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_25_no_reads_for_table.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_26_direct_add_primitive.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_2_action_data_table_sizing.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_30_action_data_imm_param.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_31_action_data_imm_imm.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_32_action_data_imm_param_imm.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_33_action_data_paramx3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_34_action_data_1_bit_params.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_35_action_data_1_bit_params_and_imms.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_36_action_data_field_param.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_37_action_data_field_field.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_38_action_data_field_same_container.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_39_action_data_add_to_field.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_40_action_data_bit_xor.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_41_action_data_remove_header.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_42_action_data_add_header.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_44_action_data_immediate.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_45_action_data_immediate_param_and_constant.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_46_action_data_big_constant.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_47_action_data_big_constant_immediate.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_48_action_data_bit_masked_set.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_49_action_data_bit_masked_set_immediate.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_4_modify_field.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_50_action_data_different_size_fields.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_51_action_data_same_parameter_used_multiple.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_52_copy_header.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_53_ternary_swizzle.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_55_generate_digest.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_56_iterate_through_packing.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_57_tcam_with_44_bits_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_58_tcam_with_40_bits.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_59_tcam_with_44_bits_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_5_sram_allocation.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_70_tcam_with_128_bits_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_71_tcam_with_128_bits_and_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_72_tcam_with_172_bits_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_72_tcam_with_172_bits_high_nibble_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_73_tcam_with_172_bits_low_nibble_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_74_tcam_with_172_bits_low_nibble_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_75_tcam_with_176_bits_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_76_tcam_with_176_bits_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_77_tcam_with_216_bits_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_78_tcam_with_220_bits_high_nibble_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_79_tcam_with_220_bits_high_nibble_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_80_tcam_with_220_bits_low_nibble_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_81_indirect_action_data_default.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_82_param_sharing.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_83_no_immediate_when_indirect_action_table.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_84_simple_wide_exact_match.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_85_table_ordering.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_86_multiple_action_widths_for_indirect_action.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_87_share_parameter_for_different_containers.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_88_testing_action_data_allocation_3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_89_testing_action_data_allocation_3_with_partial_ram.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_90_testing_action_data_allocation_3_with_fields_in_overhead.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_91_gateway_with_split_table.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_92_bit_xor_10_bits.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_93_push_and_pop.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_94_action_constant_alignment.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_96_hash_data.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_97_unrelated_tables.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_98_multiple_control_flow.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_99_share_exact_match_key.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_9_no_ternary_indirection.p4 \
   $(srcdir)/%reldir%/p4_14/test_tp_1_one_table_spill.p4 \
   $(srcdir)/%reldir%/p4_14/vk_basic_ipv4_20150706.p4 \
   $(srcdir)/%reldir%/p4_14/vk_basic_ipv4_subset.p4 \
   $(srcdir)/%reldir%/p4_14/switch.p4 ) \
   $(srcdir)/%reldir%/p4_14
	@$(GENTESTS) $(srcdir) p14_to_16 $(srcdir)/%reldir%/test-v12-sample.sh $^ >$@ || ( rm $@ && false )


tofino-p4tests.mk: $(GENTESTS) $(srcdir)/%reldir%/Makefile.am $(wildcard \
   $(srcdir)/%reldir%/p4_16/\*.p4) \
   $(srcdir)/%reldir%/p4_16
	@$(GENTESTS) $(srcdir) p4 $(srcdir)/backends/p4test/run-p4-sample.py $^ >$@ || ( rm $@ && false )

# Exercise bmv2 back-end on Tofino-specific programs
tofino-bmv2tests.mk: $(GENTESTS) $(srcdir)/%reldir%/Makefile.am $(wildcard \
   $(srcdir)/%reldir%/p4_14/01-FlexCounter.p4 \
   $(srcdir)/%reldir%/p4_14/01-OneAction.p4 \
   $(srcdir)/%reldir%/p4_14/02-ActionDep1.p4 \
   $(srcdir)/%reldir%/p4_14/02-FlexCounterActionProfile.p4 \
   $(srcdir)/%reldir%/p4_14/02-OneTableManyActions.p4 \
   $(srcdir)/%reldir%/p4_14/03-ActionDep2.p4 \
   $(srcdir)/%reldir%/p4_14/03-ActionSharing.p4 \
   $(srcdir)/%reldir%/p4_14/03-VlanProfile.p4 \
   $(srcdir)/%reldir%/p4_14/04-FullPHV3.p4 \
   $(srcdir)/%reldir%/p4_14/04-MatchDep.p4 \
   $(srcdir)/%reldir%/p4_14/04-WideAction.p4 \
   $(srcdir)/%reldir%/p4_14/05-NoCommonCode.p4 \
   $(srcdir)/%reldir%/p4_14/05-SuccessorDep.p4 \
   $(srcdir)/%reldir%/p4_14/06-MultiFieldAdd.p4 \
   $(srcdir)/%reldir%/p4_14/06-Phase0.p4 \
   $(srcdir)/%reldir%/p4_14/06-ReverseReadDep.p4 \
   $(srcdir)/%reldir%/p4_14/07-ComplexAction.p4 \
   $(srcdir)/%reldir%/p4_14/07-MacAddrCheck.p4 \
   $(srcdir)/%reldir%/p4_14/08-MacAddrCheck1.p4 \
   $(srcdir)/%reldir%/p4_14/08-OneTableManyActionsNoColors.p4 \
   $(srcdir)/%reldir%/p4_14/09-MacAddrCheck2.p4 \
   $(srcdir)/%reldir%/p4_14/09-MatchNoDep.p4 \
   $(srcdir)/%reldir%/p4_14/09-OneTableManyActionsWithColors.p4 \
   $(srcdir)/%reldir%/p4_14/10-AssignChooseSource.p4 \
   $(srcdir)/%reldir%/p4_14/10-MatchNoDep1.p4 \
   $(srcdir)/%reldir%/p4_14/10-TcamPragma.p4 \
   $(srcdir)/%reldir%/p4_14/11-AssignChooseDest.p4 \
   $(srcdir)/%reldir%/p4_14/11-FourTables.p4 \
   $(srcdir)/%reldir%/p4_14/11-MinimalL2.p4 \
   $(srcdir)/%reldir%/p4_14/12-MaxEnriesSRAM.p4 \
   $(srcdir)/%reldir%/p4_14/12-MaxEnriesTCAM.p4 \
   $(srcdir)/%reldir%/p4_14/12-SmallToBigFieldWithMask8.p4 \
   $(srcdir)/%reldir%/p4_14/13-IngressEgressConflict.p4 \
   $(srcdir)/%reldir%/p4_14/13-ResubmitMetadataSize.p4 \
   $(srcdir)/%reldir%/p4_14/14-MultipleActionsInAContainer.p4 \
   $(srcdir)/%reldir%/p4_14/15-SetMetadata.p4 \
   $(srcdir)/%reldir%/p4_14/15-WrongSize.p4 \
   $(srcdir)/%reldir%/p4_14/16-WrongSizeInfiniteLoop.p4 \
   $(srcdir)/%reldir%/p4_14/17-Vlantransform.p4 \
   $(srcdir)/%reldir%/p4_14/18-SimpleVlanTransform.p4 \
   $(srcdir)/%reldir%/p4_14/19-SimpleTrill.p4 \
   $(srcdir)/%reldir%/p4_14/20-SimpleTrillTwoStep.p4 \
   $(srcdir)/%reldir%/p4_14/21-SimpleTrillThreeStep.p4 \
   $(srcdir)/%reldir%/p4_14/22-BigToSmallFieldWithMask8.p4 \
   $(srcdir)/%reldir%/p4_14/23-SimpleMPLS.p4 \
   $(srcdir)/%reldir%/p4_14/24-SimpleTrillThreeStep2.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_multiple.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_next_stage.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_not_shared.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_separate_stages.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_shared.p4 \
   $(srcdir)/%reldir%/p4_14/action_profile_too_large.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_shared_four.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_shared.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_two_selectors.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_wide1.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_wide2.p4 \
   $(srcdir)/%reldir%/p4_14/action_selection_with_counter.p4 \
   $(srcdir)/%reldir%/p4_14/basic_ipv4_selection.p4 \
   $(srcdir)/%reldir%/p4_14/counter_test1.p4 \
   $(srcdir)/%reldir%/p4_14/counter_test2.p4 \
   $(srcdir)/%reldir%/p4_14/debug_issue_1_invalid_action_pack_format.p4 \
   $(srcdir)/%reldir%/p4_14/debug_issue_3_7_way_table.p4 \
   $(srcdir)/%reldir%/p4_14/debug_issue_4_small_exact_match_key.p4 \
   $(srcdir)/%reldir%/p4_14/dileep10.p4 \
   $(srcdir)/%reldir%/p4_14/dileep11.p4 \
   $(srcdir)/%reldir%/p4_14/dileep12.p4 \
   $(srcdir)/%reldir%/p4_14/dileep2.p4 \
   $(srcdir)/%reldir%/p4_14/dileep3.p4 \
   $(srcdir)/%reldir%/p4_14/dileep4.p4 \
   $(srcdir)/%reldir%/p4_14/dileep7-b.p4 \
   $(srcdir)/%reldir%/p4_14/dileep8.p4 \
   $(srcdir)/%reldir%/p4_14/dileep.p4 \
   $(srcdir)/%reldir%/p4_14/exact_match0.p4 \
   $(srcdir)/%reldir%/p4_14/exact_match_shared0.p4 \
   $(srcdir)/%reldir%/p4_14/exact_match_shared1.p4 \
   $(srcdir)/%reldir%/p4_14/exact_match_shared2.p4 \
   $(srcdir)/%reldir%/p4_14/exact_match_shared3.p4 \
   $(srcdir)/%reldir%/p4_14/gateway_and_big_table.p4 \
   $(srcdir)/%reldir%/p4_14/gateway_bus1.p4 \
   $(srcdir)/%reldir%/p4_14/gateway_bus2.p4 \
   $(srcdir)/%reldir%/p4_14/hash_index0.p4 \
   $(srcdir)/%reldir%/p4_14/hash_index1.p4 \
   $(srcdir)/%reldir%/p4_14/hash_index2.p4 \
   $(srcdir)/%reldir%/p4_14/hash_index3.p4 \
   $(srcdir)/%reldir%/p4_14/hash_index5.p4 \
   $(srcdir)/%reldir%/p4_14/max_counters.p4 \
   $(srcdir)/%reldir%/p4_14/meter_and_counter2.p4 \
   $(srcdir)/%reldir%/p4_14/meter_and_counter.p4 \
   $(srcdir)/%reldir%/p4_14/meter_test1.p4 \
   $(srcdir)/%reldir%/p4_14/meter_test2.p4 \
   $(srcdir)/%reldir%/p4_14/meter_test3.p4 \
   $(srcdir)/%reldir%/p4_14/meter_test4.p4 \
   $(srcdir)/%reldir%/p4_14/simple_counter.p4 \
   $(srcdir)/%reldir%/p4_14/switch_l2_profile.p4 \
   $(srcdir)/%reldir%/p4_14/switch_l2_profile_tofino.p4 \
   $(srcdir)/%reldir%/p4_14/ternary_match_shared0.p4 \
   $(srcdir)/%reldir%/p4_14/ternary_match_shared1.p4 \
   $(srcdir)/%reldir%/p4_14/ternary_match_shared2.p4 \
   $(srcdir)/%reldir%/p4_14/ternary_match_shared3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_100_hash_action.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_101_switch_msdc.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_102_clone.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_103_first_phase_0.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_10_new_crossbar_allocation.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_114_simple_drop.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_115_hash_parity_groups.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_116_predication_with_condition.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_117_first_tcam_range.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_118_tcam_range_2.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_119_tcam_range_3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_11_simple_gateway_table.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_120_tcam_range_4.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_121_tcam_range_5.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_122_tcam_range_6.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_123_meter_2.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_124_meter_3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_125_meter_pre_color.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_126_meter_pre_color_2.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_127_meter_pre_color_3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_128_table_placement_bug.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_12_no_overhead.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_132_meter_pre_color_4.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_134_stage_deps.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_135_tcam_range_7.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_136_tcam_error_detection.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_137_tcam_error_detection_2.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_138_tcam_error_detection_3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_139_tcam_error_detection_4.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_13_first_selection.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_140_table_counter.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_142_stateful_bfd.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_143_packing_constants.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_144_recirculate.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_145_shift_primitives.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_146_two_drops.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_147_subtract_primitive.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_148_action_profile.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_149_signed_and_saturating_add_sub.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_14_auto_immediate_action_data.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_150_action_bus_allocation.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_151_action_bus_allocation_2.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_152_stateful_simple_cntr.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_153_stateful_simple_cntr_with_output.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_154_stateful_sampling.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_155_stateful_3_alus.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_156_indirect_stateful_cntr.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_157_random_number_generator.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_158_share_vliw.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_159_stateful_using_phv_field.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_15_wide_key.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_160_stateful_single_bit_mode.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_161_new_primitives.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_162_add_header_init.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_163_stateful_table_math_unit.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_164_stateful_deterministic_sampling.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_165_stateful_bfd_failure_detection.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_166_stateful_generic_counter.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_167_stateful_flowlet_switching.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_168_meter_bug.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_169_stateful_sflow_sequence.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_16_action_packing_multi_entry_with_pad.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_170_stateful_selection_table_update.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_171_stateful_conga.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_172_stateful_heavy_hitter.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_173_stateful_bloom_filter.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_17_action_packing_wide_with_pad.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_18_first_bit_xor.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_19_immediate_but_no_action_data_table.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_1_ternary_match_crossbar.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_20_table_dependencies.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_21_tcam_vpns.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_22_direct_mapped_exact.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_24_action_entries_pragma.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_25_no_reads_for_table.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_26_direct_add_primitive.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_2_action_data_table_sizing.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_30_action_data_imm_param.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_31_action_data_imm_imm.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_32_action_data_imm_param_imm.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_33_action_data_paramx3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_34_action_data_1_bit_params.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_35_action_data_1_bit_params_and_imms.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_36_action_data_field_param.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_37_action_data_field_field.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_38_action_data_field_same_container.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_39_action_data_add_to_field.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_40_action_data_bit_xor.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_41_action_data_remove_header.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_42_action_data_add_header.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_44_action_data_immediate.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_45_action_data_immediate_param_and_constant.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_46_action_data_big_constant.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_47_action_data_big_constant_immediate.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_48_action_data_bit_masked_set.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_49_action_data_bit_masked_set_immediate.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_4_modify_field.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_50_action_data_different_size_fields.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_51_action_data_same_parameter_used_multiple.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_52_copy_header.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_53_ternary_swizzle.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_55_generate_digest.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_56_iterate_through_packing.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_57_tcam_with_44_bits_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_58_tcam_with_40_bits.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_59_tcam_with_44_bits_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_5_sram_allocation.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_70_tcam_with_128_bits_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_71_tcam_with_128_bits_and_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_72_tcam_with_172_bits_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_72_tcam_with_172_bits_high_nibble_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_73_tcam_with_172_bits_low_nibble_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_74_tcam_with_172_bits_low_nibble_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_75_tcam_with_176_bits_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_76_tcam_with_176_bits_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_77_tcam_with_216_bits_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_78_tcam_with_220_bits_high_nibble_and_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_79_tcam_with_220_bits_high_nibble_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_80_tcam_with_220_bits_low_nibble_no_version.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_81_indirect_action_data_default.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_82_param_sharing.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_83_no_immediate_when_indirect_action_table.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_84_simple_wide_exact_match.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_85_table_ordering.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_86_multiple_action_widths_for_indirect_action.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_87_share_parameter_for_different_containers.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_88_testing_action_data_allocation_3.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_89_testing_action_data_allocation_3_with_partial_ram.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_90_testing_action_data_allocation_3_with_fields_in_overhead.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_91_gateway_with_split_table.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_92_bit_xor_10_bits.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_93_push_and_pop.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_94_action_constant_alignment.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_96_hash_data.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_97_unrelated_tables.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_98_multiple_control_flow.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_99_share_exact_match_key.p4 \
   $(srcdir)/%reldir%/p4_14/test_config_9_no_ternary_indirection.p4 \
   $(srcdir)/%reldir%/p4_14/test_tp_1_one_table_spill.p4 \
   $(srcdir)/%reldir%/p4_14/vk_basic_ipv4_20150706.p4 \
   $(srcdir)/%reldir%/p4_14/vk_basic_ipv4_subset.p4 \
   $(srcdir)/%reldir%/p4_14/switch.p4 ) \
    $(srcdir)/%reldir%/p4_14
	@$(GENTESTS) $(srcdir) bmv2 $(srcdir)/%reldir%/test-bmv2.sh $^ >$@ || ( rm $@ && false )

check-tofino-all:
	@$(MAKE) check TESTS="$(filter tofino%, $(TESTS) $(EXTRA_TESTS))"
recheck-tofino-all:
	@$(MAKE) recheck TESTS="$(filter tofino%, $(TESTS) $(EXTRA_TESTS))"
	
CLEANFILES += \
	tofinotests.mk \
	tofino-p14_to_16_tests.mk \
	tofino-p4tests.mk \
	tofino-bmv2tests.mk \
	p4-16-tofinotests.mk \
	ortools-tofinotests.mk

# Some of these failures are still P4 v1.0 front-end bugs.
# Others are due to non-standard extensions to P4:
# The *meter* tests use direct meters and execute_meter calls with 4 arguments (not in spec)
# The *stateful* tests use extensions to P4 not in spec
# FlexCounter, action_profile use a non-standard Algorithm
# TwoReferences invokes a table twice - maybe it should become a negative test?
# *range* match type is not supported by BMv2 (used also in error_detection*.p4)
XFAIL_TESTS += \
    tofino/testdata/p4_14_samples/16-TwoReferences.p4.test \
    tofino/%reldir%/p4_16/flowlet_switching.p4.test \
    tofino/%reldir%/p4_16/bfd_offload.p4.test \
    tofino/%reldir%/p4_16/bloom_filter.p4.test \
    tofino/%reldir%/p4_16/stateful_alu.p4.test \
    bmv2/%reldir%/p4_14/02-FlexCounterActionProfile.p4.test \
    bmv2/%reldir%/p4_14/action_profile.p4.test \
    bmv2/%reldir%/p4_14/switch_l2_profile_tofino.p4.test \
    bmv2/%reldir%/p4_14/test_config_125_meter_pre_color.p4.test \
    bmv2/%reldir%/p4_14/test_config_126_meter_pre_color_2.p4.test \
    bmv2/%reldir%/p4_14/test_config_127_meter_pre_color_3.p4.test \
    bmv2/%reldir%/p4_14/test_config_132_meter_pre_color_4.p4.test \
    bmv2/%reldir%/p4_14/test_config_144_recirculate.p4.test \
    bmv2/%reldir%/p4_14/test_config_152_stateful_simple_cntr.p4.test \
    bmv2/%reldir%/p4_14/test_config_153_stateful_simple_cntr_with_output.p4.test \
    bmv2/%reldir%/p4_14/test_config_154_stateful_sampling.p4.test \
    bmv2/%reldir%/p4_14/test_config_155_stateful_3_alus.p4.test \
    bmv2/%reldir%/p4_14/test_config_156_indirect_stateful_cntr.p4.test \
    bmv2/%reldir%/p4_14/test_config_159_stateful_using_phv_field.p4.test \
    bmv2/%reldir%/p4_14/test_config_160_stateful_single_bit_mode.p4.test \
    bmv2/%reldir%/p4_14/test_config_163_stateful_table_math_unit.p4.test \
    bmv2/%reldir%/p4_14/test_config_164_stateful_deterministic_sampling.p4.test \
    bmv2/%reldir%/p4_14/test_config_165_stateful_bfd_failure_detection.p4.test \
    bmv2/%reldir%/p4_14/test_config_166_stateful_generic_counter.p4.test \
    bmv2/%reldir%/p4_14/test_config_167_stateful_flowlet_switching.p4.test \
    bmv2/%reldir%/p4_14/test_config_169_stateful_sflow_sequence.p4.test \
    bmv2/%reldir%/p4_14/test_config_170_stateful_selection_table_update.p4.test \
    bmv2/%reldir%/p4_14/test_config_171_stateful_conga.p4.test \
    bmv2/%reldir%/p4_14/test_config_172_stateful_heavy_hitter.p4.test \
    bmv2/%reldir%/p4_14/test_config_173_stateful_bloom_filter.p4.test \
    p14_to_16/%reldir%/p4_14/02-FlexCounterActionProfile.p4.test \
    p14_to_16/%reldir%/p4_14/switch_20160602/switch.p4.test \
    p14_to_16/%reldir%/p4_14/switch_l2_profile_tofino.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_125_meter_pre_color.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_126_meter_pre_color_2.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_127_meter_pre_color_3.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_132_meter_pre_color_4.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_144_recirculate.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_152_stateful_simple_cntr.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_153_stateful_simple_cntr_with_output.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_154_stateful_sampling.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_155_stateful_3_alus.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_156_indirect_stateful_cntr.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_159_stateful_using_phv_field.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_160_stateful_single_bit_mode.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_163_stateful_table_math_unit.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_164_stateful_deterministic_sampling.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_165_stateful_bfd_failure_detection.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_166_stateful_generic_counter.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_167_stateful_flowlet_switching.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_169_stateful_sflow_sequence.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_170_stateful_selection_table_update.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_171_stateful_conga.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_172_stateful_heavy_hitter.p4.test \
    p14_to_16/%reldir%/p4_14/test_config_173_stateful_bloom_filter.p4.test

# These currently fail gateway check with 'expression too complex'
XFAIL_TESTS += \
    tofino/testdata/p4_14_samples/flowlet_switching.p4.test \
    tofino/testdata/p4_14_samples/switch.p4.test \
    tofino/%reldir%/p4_14/07-MacAddrCheck.p4.test \
    tofino/%reldir%/p4_14/08-MacAddrCheck1.p4.test

# Parser failure.
XFAIL_TESTS += \
    tofino/testdata/p4_14_samples/parser_dc_full.p4.test \
    tofino-ortools/testdata/p4_14_samples/parser_dc_full.p4.test

# Generates broken PHV alloc (regs used by both ingress & egress)
XFAIL_TESTS += tofino-ortools/testdata/p4_14_samples/basic_routing.p4.test

# Missing constraints for header stack POV bits.
XFAIL_TESTS += tofino-ortools/testdata/p4_14_samples/instruct5.p4.test

# Layout Constraints from gateway allocation
XFAIL_TESTS += tofino/extensions/p4_tests/p4_14/gateway_bus2.p4.test
XFAIL_TESTS += tofino-ortools/extensions/p4_tests/p4_14/gateway_bus1.p4.test
XFAIL_TESTS += tofino-ortools/extensions/p4_tests/p4_14/gateway_bus2.p4.test

# Fail on purpose due to action profiles not being mutually exclusive
XFAIL_TESTS += tofino/extensions/p4_tests/p4_14/action_profile_not_shared.p4.test
XFAIL_TESTS += tofino/extensions/p4_tests/p4_14/action_profile_next_stage.p4.test

# Multiple calculations per action
XFAIL_TESTS += tofino-ortools/extensions/p4_tests/p4_14/counter_test1.p4.test
XFAIL_TESTS += tofino-ortools/extensions/p4_tests/p4_14/counter_test2.p4.test
XFAIL_TESTS += tofino-ortools/extensions/p4_tests/p4_14/meter_test1.p4.test

# Incorrect data layour in ixbar -- fails to get entire 128-bit value in one group.
# intermittent failure?
IFAIL_TESTS += tofino-ortools/testdata/p4_14_samples/07-MultiProtocol.p4.test

# Sometimes splits ternary match data across two groups when it shouldn't
IFAIL_TESTS += tofino-ortools/testdata/p4_14_samples/hitmiss.p4.test

# These fail (or pass) intermittently on Jenkins; not sure why
IFAIL_TESTS += tofino-ortools/extensions/p4_tests/p4_14/simple_counter.p4.test \
	       tofino-ortools/extensions/p4_tests/p4_14/max_counters.p4.test \
	       tofino-ortools/extensions/p4_tests/p4_14/gateway_bus2.p4.test \
	       tofino-ortools/testdata/p4_14_samples/bigfield1.p4.test

