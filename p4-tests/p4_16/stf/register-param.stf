# Assignment
#           f1       f2     h1  b1 b2
packet 0 00000000 00000000 0000 00 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
expect 0 01ABCDEF 00000000 0000 00 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
wait

# If (simple comparison)
#           f1       f2     h1  b1 b2
packet 0 00007FFF 00000000 0000 01 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
expect 0 00007FFF 00000000 0000 01 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
wait
check_register ingress.reg1(0) lo = 32767

# If (complex comparison)
#           f1       f2     h1  b1 b2
packet 0 0001FFFF 00000000 0000 02 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
expect 0 0001FFFF 00000000 0000 02 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
wait
check_register ingress.reg1(0) lo = 131071

# Two register parameters in a single register action
#           f1       f2     h1  b1 b2
# Check value.first
packet 0 00000000 00000000 0000 10 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
expect 0 00000000 00000000 0000 10 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
wait
# Check value.second
packet 0 00000000 00000000 0000 11 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
expect 0 00000000 00000000 0000 11 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
wait
# Increment value.first and value.second
packet 0 00000000 00000000 0000 12 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
expect 0 00000000 00000000 0000 12 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
wait
# Increment value.first and value.second
packet 0 00000000 00000000 0000 12 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
expect 0 00000000 00000000 0000 12 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
wait
# Check value.first (incremented twice, i.e. 1+1)
packet 0 00000000 00000000 0000 10 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
expect 0 00000002 00000000 0000 10 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
wait
# Check value.second (incremented twice, i.e. 100+100)
packet 0 00000000 00000000 0000 11 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
expect 0 000000C8 00000000 0000 11 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
wait

# Direct register

add ingress.table1 hdr.data.f1:0x00000000 ingress.table1action1()

#           f1       f2     h1  b1 b2
# Check value.first & increment value.first and value.second
packet 0 00000000 00000000 0000 20 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
expect 0 00000000 00000000 0000 20 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
wait
# Check value.first & increment value.first and value.second
packet 0 00000000 00000000 0000 20 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
expect 0 00000003 00000000 0000 20 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
wait
# Check value.first & increment value.first and value.second
packet 0 00000000 00000000 0000 20 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
expect 0 00000006 00000000 0000 20 00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
wait
