## SmokeTest

add t 1 h.f1:0xbeef/4  do(val:0x42, port:1)
add t 1 h.f1:0xbeef/8  do(val:0x43, port:2)
add t 1 h.f1:0xbeef/12 do(val:0x44, port:3)
add t 1 h.f1:0xbeef/16 do(val:0x45, port:4)

packet 1 beef0000 00000000
expect 4 beef4500 00000000

wait
remove all

## SimpleTest

# Sending a packet when no entry is installed. Should miss.
packet 1 dead0000 00000000
no_packet

# Add a single entry: matches on the 8 bit length prefix of "0xdead"
add t 1 h.f1:0xdead/8 do(val:0x42, port:3)

# Send a matching packet, with the exact value in the ternary entry.
# Expect packet on port 3, with a f2 field of 0x42.
packet 1 dead0000 00000001
expect 3 dead4200 00000001

# Send a matching packet, exercising the ternary match.
# Expect packet on port 3, with a f2 field of 0x42.
packet 1 de000000 00000001
expect 3 de004200 00000001

packet 1 aa000000 00000002
no_packet
